{"version":3,"sources":["api/metaWeather/metaWeather.ts","weatherForecastWidget/components/searchBar/SearchBar.tsx","weatherForecastWidget/helpers/roundingHelper.ts","weatherForecastWidget/components/weatherCardLarge/WeatherCardLarge.tsx","weatherForecastWidget/components/weatherCardSmall/WeatherCardSmall.tsx","weatherForecastWidget/app/App.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["baseUrl","getLocationData","query","a","url","latitude","longitude","fetch","res","ok","json","parsedRes","getWeatherData","woeid","SearchBar","state","locationQuery","locationList","handleSearch","event","metaWeather","target","value","setState","handleLocationListSelect","index","selectedLocation","toString","weatherData","props","updateWidgetState","title","className","aria-label","debounceTimeout","onChange","this","placeholder","type","onClick","handleGeolocation","map","location","React","Component","roundingHelper","num","dec","undefined","decimal","i","Math","round","Number","EPSILON","WeatherCardLarge","consolidated_weather","day","applicable_date","src","weather_state_abbr","weather_state_name","min_temp","max_temp","wind_direction_compass","wind_speed","WeatherCardSmall","WeatherForecastWidget","loading","data","navigator","geolocation","getCurrentPosition","position","coords","alert","prevProps","href","slice","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.832663d1.chunk.js","sourcesContent":["// proxied to \"https://www.metaweather.com\" in setupProxy.js for dev\n// const baseUrl = '/api';\n\n// using cors-anywhere for github pages as metaweather does not attach response header Access-Control-Allow-Origin: *\nconst baseUrl = 'https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api';\n\nconst getLocationData = async (query: string | {latitude: number; longitude: number}) => {\n  let url = baseUrl;\n  if( typeof query === 'object') {\n    url += `/location/search/?lattlong=${query.latitude},${query.longitude}`;\n  } else {\n    url += `/location/search/?query=${query}`;\n  }\n  const res = await fetch(url);\n  if (res.ok) {\n    const parsedRes = await res.json();\n    return parsedRes;\n  }\n};\n\nconst getWeatherData = async (woeid: string) => {\n  const url = `${baseUrl}/location/${woeid}`;\n  const res = await fetch(url);\n  if (res.ok) {\n    const parsedRes = await res.json();\n    return parsedRes;\n  }\n};\n\nexport default {\n  getLocationData,\n  getWeatherData\n};\n","import '@fortawesome/fontawesome-free/css/all.css';\nimport React from 'react';\nimport metaWeather from '../../../api/metaWeather/metaWeather';\nimport { DebounceInput } from 'react-debounce-input';\nimport { metaWeatherLocationSearchResponse } from '../../../api/metaWeather/types';\nimport '../../app/styles.css';\n\ntype searchBarState = {\n    locationQuery: string,\n    locationList: metaWeatherLocationSearchResponse[]\n}\n\nexport default class SearchBar extends React.Component<any> {\n    state: searchBarState = {\n      locationQuery: '',\n      locationList: []\n    }\n\n    handleSearch = async (event: any) => {\n      const locationList = await metaWeather.getLocationData(event.target.value);\n      this.setState({\n        locationQuery: event.target.value,\n        locationList\n      });\n    }\n\n    handleLocationListSelect = async (index: number) => {\n      const selectedLocation = this.state.locationList[index];\n      const weatherData = await metaWeather.getWeatherData(selectedLocation.woeid.toString());\n      this.props.updateWidgetState({\n        weatherData\n      });\n      this.setState({\n        locationQuery: selectedLocation.title,\n        locationList: []\n      });\n    }\n\n    render() {\n      return <div className=\"searchBar\">\n        <div className=\"input-group col-sm-12\">\n          <div className=\"input-group-prepend\">\n            <span className=\"input-group-text\">\n              <i className=\"fas fa-search\"/>\n            </span>\n          </div>\n\n          <DebounceInput \n            aria-label=\"search location\" \n            debounceTimeout={500} \n            onChange={(event: any) => this.handleSearch(event)} \n            value={this.state.locationQuery} \n            placeholder=\"Search\"/>\n\n          <div className=\"input-group-append \">\n            <button \n              aria-label=\"weather by geolocation\" \n              className=\"btn btn-outline-secondary\" \n              type=\"button\" \n              onClick={this.props.handleGeolocation}>\n              <i className=\"fas fa-map-marker-alt\"/>\n            </button>\n          </div>\n        </div>\n\n        <ul className=\"list-group\">\n          {this.state.locationList?.map((location: metaWeatherLocationSearchResponse, index: number ) => {\n            return <li \n              key={index} \n              className=\"list-group-item searchResult\" \n              onClick={() => this.handleLocationListSelect(index)}>{location.title}\n            </li>;\n          })}\n        </ul>\n      </div>;\n    }\n}\n","const roundingHelper = (num: number | undefined, dec?: number) => {\n  if(num === undefined) {\n    return;\n  }\n  let decimal = 1;\n  if(dec) {\n    for(let i = 0; i < dec; i++) {\n      decimal *= 10;\n    }\n  }\n  const rounded = Math.round((num + Number.EPSILON) * decimal);\n  return rounded / decimal;\n};\n\nexport default roundingHelper;\n","import React from 'react';\nimport { consolidatedWeatherObject } from '../../../api/metaWeather/types';\nimport roundingHelper from '../../helpers/roundingHelper';\n\ntype weatherCardLargeState = {\n  consolidated_weather: consolidatedWeatherObject | null,\n}\n\nexport default class WeatherCardLarge extends React.Component<any> {\n\n    state: weatherCardLargeState = {\n      consolidated_weather: null\n    }\n\n    componentDidMount() {\n      this.setState({\n        consolidated_weather: this.props.weatherData\n      });\n\n    }\n\n    render() {\n      const day = this.state.consolidated_weather;\n      return <div className=\"col-sm-12\">\n        <div className=\"card bg-transparent border-0\" aria-label={day?.applicable_date}>\n          <div className=\"card-body\">\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <h2>Today</h2>\n                <h2>{day?.applicable_date}</h2>\n                <img src={`https://www.metaweather.com/static/img/weather/${day?.weather_state_abbr}.svg`}/>\n                <h3>{day?.weather_state_name}</h3>\n              </div>\n\n              <div className=\"col-sm-6\">\n                <div className=\"WeatherLargeCardDetails\">\n                  <ul>\n                    <li>Min <i className=\"fas fa-temperature-low\"/> {roundingHelper(day?.min_temp, 2)}째C</li>\n                    <li>Max <i className=\"fas fa-temperature-high\"/> {roundingHelper(day?.max_temp, 2)}째C</li>\n                    <li><i className=\"fas fa-wind\"/> Direction: {day?.wind_direction_compass}</li>\n                    <li><i className=\"fas fa-wind\"/> Speed: {roundingHelper(day?.wind_speed, 2)}mph</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>;\n    }\n}\n","import React from 'react';\nimport { consolidatedWeatherObject } from '../../../api/metaWeather/types';\nimport roundingHelper from '../../helpers/roundingHelper';\n\ntype weatherCardSmallState = {\n    consolidated_weather: consolidatedWeatherObject | null,\n}\n\nexport default class WeatherCardSmall extends React.Component<any> {\n\n    state: weatherCardSmallState = {\n      consolidated_weather: null\n    }\n    componentDidMount() {\n      this.setState({\n        consolidated_weather: this.props.weatherData\n      });\n    }\n    \n    render() {\n      const day = this.state.consolidated_weather;\n      return <div className=\"col-sm-4\">\n        <div className=\"card bg-transparent border-0\" aria-label={day?.applicable_date}>\n          <div className=\"card-body\">\n            <h2>{day?.applicable_date}</h2>\n            <img src={`https://www.metaweather.com/static/img/weather/${day?.weather_state_abbr}.svg`}/>\n            <h3>{day?.weather_state_name}</h3>\n            <ul>\n              <li>Min <i className=\"fas fa-temperature-low\"/> {roundingHelper(day?.min_temp, 2)}째C</li>\n              <li>Max <i className=\"fas fa-temperature-high\"/> {roundingHelper(day?.max_temp, 2)}째C</li>\n              <li><i className=\"fas fa-wind\"/> Direction: {day?.wind_direction_compass}</li>\n              <li><i className=\"fas fa-wind\"/> Speed: {roundingHelper(day?.wind_speed, 2)}mph</li>\n            </ul>\n          </div>\n        </div>\n      </div>;\n    }\n}\n","import React from 'react';\nimport './styles.css';\nimport SearchBar from '../components/searchBar/SearchBar';\nimport WeatherCardLarge from '../components/weatherCardLarge/WeatherCardLarge';\nimport metaWeather from '../../api/metaWeather/metaWeather';\nimport { metaWeatherLocationResponse, consolidatedWeatherObject } from '../../api/metaWeather/types';\nimport WeatherCardSmall from '../components/weatherCardSmall/WeatherCardSmall';\n\ntype WeatherForecastWidgetState = {\n  weatherData: metaWeatherLocationResponse | null,\n  loading: boolean\n}\n\nexport default class WeatherForecastWidget extends React.Component<any> {\n  state: WeatherForecastWidgetState = {\n    weatherData: null,\n    loading: true\n  }\n\n  async componentDidMount() {\n    this.handleGeolocation();\n  }\n\n  // re-render child components on state change\n  componentDidUpdate(prevProps: metaWeatherLocationResponse) {\n    if(prevProps.title !== this.props.title) {\n      this.setState({ title: this.props.title });\n    }\n  }\n\n  // lets child components update parent component\n  updateWidgetState = (data: {}) => {\n    this.setState({ loading: true });\n    this.setState(data);\n    this.setState({ loading: false });\n  }\n  \n  // handles geolocation from browser search\n  // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition\n  handleGeolocation = () => {\n    if (navigator.geolocation) {\n      let geolocation: {latitude?: number, longitude?: number} = {};\n      navigator.geolocation.getCurrentPosition(async (position: any) => {\n        const geolocation = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        };\n        if(geolocation.latitude && geolocation.longitude) {\n          try {\n            const location = await metaWeather.getLocationData(geolocation);\n            const weatherData = await metaWeather.getWeatherData(location[0].woeid);\n            this.updateWidgetState({\n              weatherData\n            });  \n          } catch(err) {\n            return err;\n          }\n        }\n      });\n    } else {\n      alert('Geolocation is not supported by this browser.');\n    }\n  }\n\n  render() {\n    return <div className=\"WeatherForecastWidget\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <h1><a href=\"https://www.metaweather.com/\">MetaWeather</a> @ {this.state.weatherData?.title}</h1>\n        </div>\n\n        <div className=\"row\">\n          <SearchBar \n            aria-label=\"search bar\" \n            updateWidgetState={this.updateWidgetState} \n            handleGeolocation={this.handleGeolocation}/>\n        </div>\n\n        <div className=\"row\">\n          {\n            this.state.loading\n              ? <div>Loading</div>\n              : <WeatherCardLarge\n                weatherData={this.state.weatherData?.consolidated_weather[0]}/>\n          }\n        </div>\n\n        <div className=\"row\">\n          {/*parse the 2nd to 4th value of consolidated_weather array to display next 3 days of weather*/}\n          {\n            this.state.loading\n              ? <div>Loading</div>\n              : this.state.weatherData?.consolidated_weather.slice(1,4).map((day: consolidatedWeatherObject) => {\n                return <WeatherCardSmall weatherData={day}/>;\n              })\n          }\n        </div>\n      </div>\n    </div>;\n  }\n}\n","import React from 'react';\nimport './App.css';\nimport WeatherForecastWidget from './weatherForecastWidget/app/App';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <WeatherForecastWidget/>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}